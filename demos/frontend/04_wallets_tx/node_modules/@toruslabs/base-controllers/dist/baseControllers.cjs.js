module.exports =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 38);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

module.exports = require("@babel/runtime/helpers/defineProperty");

/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "u", function() { return FEATURES_PROVIDER_CHANGE_WINDOW; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "t", function() { return FEATURES_DEFAULT_WALLET_WINDOW; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "s", function() { return FEATURES_DEFAULT_POPUP_WINDOW; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "r", function() { return FEATURES_CONFIRM_WINDOW; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "v", function() { return POPUP_LOADED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "w", function() { return POPUP_RESULT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "z", function() { return SETUP_COMPLETE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ACTIVITY_ACTION_ALL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return ACTIVITY_ACTION_SEND; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return ACTIVITY_ACTION_RECEIVE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return ACTIVITY_ACTION_TOPUP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return ACTIVITY_PERIOD_ALL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return ACTIVITY_PERIOD_WEEK_ONE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return ACTIVITY_PERIOD_MONTH_ONE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return ACTIVITY_PERIOD_MONTH_SIX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return ACTIVITY_STATUS_SUCCESSFUL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return ACTIVITY_STATUS_UNSUCCESSFUL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return ACTIVITY_STATUS_PENDING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return ACTIVITY_STATUS_CANCELLED; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return ACTIVITY_STATUS_CANCELLING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "q", function() { return COMMUNICATION_NOTIFICATIONS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "p", function() { return COMMUNICATION_JRPC_METHODS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "x", function() { return PROVIDER_JRPC_METHODS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "y", function() { return PROVIDER_NOTIFICATIONS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "n", function() { return BROADCAST_CHANNELS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "o", function() { return BROADCAST_CHANNELS_MSGS; });
const FEATURES_PROVIDER_CHANGE_WINDOW = {
  height: 660,
  width: 375
};
const FEATURES_DEFAULT_WALLET_WINDOW = {
  height: 740,
  width: 1315
};
const FEATURES_DEFAULT_POPUP_WINDOW = {
  height: 700,
  width: 1200
};
const FEATURES_CONFIRM_WINDOW = {
  height: 700,
  width: 450
};
const POPUP_LOADED = "popup_loaded";
const POPUP_RESULT = "popup_result";
const SETUP_COMPLETE = "setup_complete";
const ACTIVITY_ACTION_ALL = "walletActivity.allTransactions";
const ACTIVITY_ACTION_SEND = "walletActivity.send";
const ACTIVITY_ACTION_RECEIVE = "walletActivity.receive";
const ACTIVITY_ACTION_TOPUP = "walletActivity.topup";
const ACTIVITY_PERIOD_ALL = "walletActivity.all";
const ACTIVITY_PERIOD_WEEK_ONE = "walletActivity.lastOneWeek";
const ACTIVITY_PERIOD_MONTH_ONE = "walletActivity.lastOneMonth";
const ACTIVITY_PERIOD_MONTH_SIX = "walletActivity.lastSixMonts";
const ACTIVITY_STATUS_SUCCESSFUL = "walletActivity.successful";
const ACTIVITY_STATUS_UNSUCCESSFUL = "walletActivity.unsuccessful";
const ACTIVITY_STATUS_PENDING = "walletActivity.pending";
const ACTIVITY_STATUS_CANCELLED = "walletActivity.cancelled";
const ACTIVITY_STATUS_CANCELLING = "walletActivity.cancelling";
const COMMUNICATION_NOTIFICATIONS = {
  IFRAME_STATUS: "iframe_status",
  // Tell embed to create the window
  CREATE_WINDOW: "create_window",
  // Tell embed to close the window
  CLOSE_WINDOW: "close_window",
  USER_LOGGED_IN: "user_logged_in",
  USER_LOGGED_OUT: "user_logged_out"
};
const COMMUNICATION_JRPC_METHODS = {
  LOGOUT: "logout",
  WALLET_INSTANCE_ID: "wallet_instance_id",
  USER_INFO: "user_info",
  SET_PROVIDER: "set_provider",
  TOPUP: "topup",
  IFRAME_STATUS: "iframe_status",
  // embed has opened the window as requested
  OPENED_WINDOW: "opened_window",
  // user has closed the window from embed's side
  CLOSED_WINDOW: "closed_window",
  GET_PROVIDER_STATE: "get_provider_state",
  LOGIN_WITH_PRIVATE_KEY: "login_with_private_key"
};
const PROVIDER_JRPC_METHODS = {
  GET_PROVIDER_STATE: "wallet_get_provider_state"
};
const PROVIDER_NOTIFICATIONS = {
  ACCOUNTS_CHANGED: "wallet_accounts_changed",
  CHAIN_CHANGED: "wallet_chain_changed",
  UNLOCK_STATE_CHANGED: "wallet_unlock_state_changed"
};
const BROADCAST_CHANNELS = {
  REDIRECT_CHANNEL: "redirect_channel",
  PROVIDER_CHANGE_CHANNEL: "torus_provider_change_channel",
  TRANSACTION_CHANNEL: "torus_channel",
  MESSAGE_CHANNEL: "torus_message_channel",
  WALLET_LOGOUT_CHANNEL: "wallet_logout_channel",
  WALLET_SELECTED_ADDRESS_CHANNEL: "wallet_selected_address_channel",
  WALLET_NETWORK_CHANGE_CHANNEL: "wallet_network_change_channel",
  WALLET_ACCOUNT_IMPORT_CHANNEL: "wallet_account_import_channel"
};
const BROADCAST_CHANNELS_MSGS = {
  LOGOUT: "logout",
  ACCOUNT_IMPORTED: "account_imported",
  SELECTED_ADDRESS_CHANGE: "selected_address_change",
  NETWORK_CHANGE: "network_change"
};

/***/ }),
/* 2 */
/***/ (function(module, exports) {

module.exports = require("loglevel");

/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, "j", function() { return /* reexport */ getTxStatusText; });
__webpack_require__.d(__webpack_exports__, "m", function() { return /* reexport */ utils["l" /* intToHex */]; });
__webpack_require__.d(__webpack_exports__, "o", function() { return /* reexport */ utils["n" /* randomId */]; });
__webpack_require__.d(__webpack_exports__, "n", function() { return /* reexport */ utils["m" /* padWithZeroes */]; });
__webpack_require__.d(__webpack_exports__, "d", function() { return /* reexport */ utils["d" /* concatSig */]; });
__webpack_require__.d(__webpack_exports__, "r", function() { return /* reexport */ utils["q" /* timeout */]; });
__webpack_require__.d(__webpack_exports__, "f", function() { return /* reexport */ utils["f" /* formatSmallNumbers */]; });
__webpack_require__.d(__webpack_exports__, "b", function() { return /* reexport */ utils["b" /* addressSlicer */]; });
__webpack_require__.d(__webpack_exports__, "q", function() { return /* reexport */ utils["p" /* significantDigits */]; });
__webpack_require__.d(__webpack_exports__, "e", function() { return /* reexport */ utils["e" /* formatDate */]; });
__webpack_require__.d(__webpack_exports__, "g", function() { return /* reexport */ utils["g" /* formatTime */]; });
__webpack_require__.d(__webpack_exports__, "s", function() { return /* reexport */ utils["r" /* transactionMatchesNetwork */]; });
__webpack_require__.d(__webpack_exports__, "l", function() { return /* reexport */ utils["k" /* hashMessage */]; });
__webpack_require__.d(__webpack_exports__, "p", function() { return /* reexport */ utils["o" /* signMessage */]; });
__webpack_require__.d(__webpack_exports__, "i", function() { return /* reexport */ utils["i" /* getPopupFeatures */]; });
__webpack_require__.d(__webpack_exports__, "c", function() { return /* reexport */ utils["c" /* broadcastChannelOptions */]; });
__webpack_require__.d(__webpack_exports__, "h", function() { return /* reexport */ utils["h" /* getCustomDeviceInfo */]; });
__webpack_require__.d(__webpack_exports__, "a", function() { return /* reexport */ utils["a" /* UserError */]; });
__webpack_require__.d(__webpack_exports__, "k", function() { return /* reexport */ utils["j" /* handleRedirectParameters */]; });

// EXTERNAL MODULE: ./src/enums.ts
var enums = __webpack_require__(1);

// CONCATENATED MODULE: ./src/utils/txUtils.ts

const getTxStatusText = txStatus => {
  switch (txStatus) {
    case "rejected":
    case "unapproved":
    case "failed":
      return enums["m" /* ACTIVITY_STATUS_UNSUCCESSFUL */];

    case "confirmed":
      return enums["l" /* ACTIVITY_STATUS_SUCCESSFUL */];

    case "submitted":
      return enums["k" /* ACTIVITY_STATUS_PENDING */];

    case "cancelled":
      return enums["i" /* ACTIVITY_STATUS_CANCELLED */];

    default:
      return "";
  }
};
// EXTERNAL MODULE: ./src/utils/utils.ts
var utils = __webpack_require__(11);

// CONCATENATED MODULE: ./src/utils/index.ts



/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return TransactionStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TRANSACTION_TYPES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return TX_EVENTS; });
/**
 * The status of the transaction. Each status represents the state of the transaction internally
 * in the wallet. Some of these correspond with the state of the transaction on the network, but
 * some are wallet-specific.
 */
let TransactionStatus;

(function (TransactionStatus) {
  TransactionStatus["approved"] = "approved";
  TransactionStatus["cancelled"] = "cancelled";
  TransactionStatus["confirmed"] = "confirmed";
  TransactionStatus["failed"] = "failed";
  TransactionStatus["finalized"] = "finalized";
  TransactionStatus["processed"] = "processed";
  TransactionStatus["rejected"] = "rejected";
  TransactionStatus["signed"] = "signed";
  TransactionStatus["submitted"] = "submitted";
  TransactionStatus["unapproved"] = "unapproved";
  TransactionStatus["dropped"] = "dropped";
  TransactionStatus["expired"] = "expired";
})(TransactionStatus || (TransactionStatus = {}));

const TRANSACTION_TYPES = {
  CONTRACT_INTERACTION: "contractInteraction",
  DEPLOY_CONTRACT: "contractDeployment",
  STANDARD_TRANSACTION: "transaction",
  STANDARD_PAYMENT_TRANSACTION: "payment_transaction" // specific to chains like solana and casper

};
const TX_EVENTS = {
  TX_WARNING: "tx:warning",
  TX_ERROR: "tx:error",
  TX_FAILED: "tx:failed",
  TX_CONFIRMED: "tx:confirmed",
  TX_DROPPED: "tx:dropped",
  TX_EXPIRED: "tx:expired",
  TX_STATUS_UPDATE: "tx:status_update",
  TX_UNAPPROVED: "tx:unapproved"
};

/***/ }),
/* 5 */
/***/ (function(module, exports) {

module.exports = require("@toruslabs/http-helpers");

/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }



/**
 * Controller class that provides configuration, state management, and subscriptions
 */
class BaseController extends _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__["SafeEventEmitter"] {
  /**
   * Default options used to configure this controller
   */

  /**
   * Default state set on this controller
   */

  /**
   * Determines if listeners are notified of state changes
   */

  /**
   * Name of this controller used during composition
   */

  /**
   * Creates a BaseController instance. Both initial state and initial
   * configuration options are merged with defaults upon initialization.
   *
   * @param config - Initial options used to configure this controller
   * @param state - Initial state to set on this controller
   */
  constructor(_ref) {
    let {
      config = {},
      state = {}
    } = _ref;
    super(); // Use assign since generics can't be spread: https://git.io/vpRhY

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "defaultConfig", {});

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "defaultState", {});

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "disabled", false);

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "name", "BaseController");

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "initialConfig", void 0);

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "initialState", void 0);

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "internalConfig", this.defaultConfig);

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "internalState", this.defaultState);

    this.initialState = state;
    this.initialConfig = config;
  }
  /**
   * Retrieves current controller configuration options
   *
   * @returns - Current configuration
   */


  get config() {
    return this.internalConfig;
  }
  /**
   * Retrieves current controller state
   *
   * @returns - Current state
   */


  get state() {
    return this.internalState;
  }
  /**
   * Updates controller configuration
   *
   * @param config - New configuration options
   * @param overwrite - Overwrite config instead of merging
   * @param fullUpdate - Boolean that defines if the update is partial or not
   */


  configure(config) {
    let overwrite = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    let fullUpdate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;

    if (fullUpdate) {
      this.internalConfig = overwrite ? config : Object.assign(this.internalConfig, config);

      for (const key in this.internalConfig) {
        if (typeof this.internalConfig[key] !== "undefined") {
          this[key] = this.internalConfig[key];
        }
      }
    } else {
      for (const key in config) {
        /* istanbul ignore else */
        if (typeof this.internalConfig[key] !== "undefined") {
          this.internalConfig[key] = config[key];
          this[key] = config[key];
        }
      }
    }
  }
  /**
   * Updates controller state
   *
   * @param state - New state
   * @param overwrite - Overwrite state instead of merging
   */


  update(state) {
    let overwrite = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    this.internalState = overwrite ? _objectSpread({}, state) : _objectSpread(_objectSpread({}, this.internalState), state);
    this.emit("store", this.internalState);
  }
  /**
   * Enables the controller. This sets each config option as a member
   * variable on this instance and triggers any defined setters. This
   * also sets initial state and triggers any listeners.
   *
   * @returns - This controller instance
   */


  initialize() {
    this.internalState = this.defaultState;
    this.internalConfig = this.defaultConfig;
    this.configure(this.initialConfig);
    this.update(this.initialState);
    return this;
  }

}

/* harmony default export */ __webpack_exports__["a"] = (BaseController);

/***/ }),
/* 7 */
/***/ (function(module, exports) {

module.exports = require("@toruslabs/openlogin-jrpc");

/***/ }),
/* 8 */
/***/ (function(module, exports) {

module.exports = require("broadcast-channel");

/***/ }),
/* 9 */
/***/ (function(module, exports) {

module.exports = require("ethereumjs-util");

/***/ }),
/* 10 */
/***/ (function(module, exports) {

module.exports = require("bignumber.js");

/***/ }),
/* 11 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return intToHex; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "n", function() { return randomId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return padWithZeroes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return concatSig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "q", function() { return timeout; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return formatSmallNumbers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return addressSlicer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "p", function() { return significantDigits; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return formatDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return formatTime; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "r", function() { return transactionMatchesNetwork; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return hashMessage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "o", function() { return signMessage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return getPopupFeatures; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return broadcastChannelOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return getCustomDeviceInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return UserError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return handleRedirectParameters; });
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(10);
/* harmony import */ var bignumber_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bignumber_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9);
/* harmony import */ var ethereumjs_util__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__);



/**
 * General utility functions
 */
function intToHex(i) {
  const hex = i.toString(16);
  return "0x".concat(hex);
}
/**
 * Returns a random number. Don't use for cryptographic purposes.
 * @returns a random number
 */

const randomId = () => Math.random().toString(36).slice(2);
/**
 * Pads the front of the given hex string with zeroes until it reaches the
 * target length. If the input string is already longer than or equal to the
 * target length, it is returned unmodified.
 *
 * If the input string is "0x"-prefixed or not a hex string, an error will be
 * thrown.
 *
 * @param hexString - The hexadecimal string to pad with zeroes.
 * @param targetLength - The target length of the hexadecimal string.
 * @returns The input string front-padded with zeroes, or the original string
 * if it was already greater than or equal to to the target length.
 */

function padWithZeroes(hexString, targetLength) {
  if (hexString !== "" && !/^[a-f0-9]+$/iu.test(hexString)) {
    throw new Error("Expected an unprefixed hex string. Received: ".concat(hexString));
  }

  if (targetLength < 0) {
    throw new Error("Expected a non-negative integer target length. Received: ".concat(targetLength));
  }

  return String.prototype.padStart.call(hexString, targetLength, "0");
}
/**
 * Concatenate an extended ECDSA signature into a hex string.
 *
 * @param v - The 'v' portion of the signature.
 * @param r - The 'r' portion of the signature.
 * @param s - The 's' portion of the signature.
 * @returns The concatenated ECDSA signature.
 */

function concatSig(v, r, s) {
  const rSig = Object(ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__["fromSigned"])(r);
  const sSig = Object(ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__["fromSigned"])(s);
  const vSig = Object(ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__["bufferToInt"])(v);
  const rStr = padWithZeroes(Object(ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__["toUnsigned"])(rSig).toString("hex"), 64);
  const sStr = padWithZeroes(Object(ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__["toUnsigned"])(sSig).toString("hex"), 64);
  const vStr = Object(ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__["stripHexPrefix"])(intToHex(vSig));
  return Object(ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__["addHexPrefix"])(rStr.concat(sStr, vStr));
}
function timeout(duration) {
  return new Promise(resolve => {
    const timeoutRef = window.setTimeout(() => {
      resolve();
      window.clearTimeout(timeoutRef);
    }, duration);
  });
}
/**
 * Text/number formatting utilities
 */

const formatSmallNumbers = function (number) {
  let currency = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "usd";
  let noTilde = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  const finalNumber = bignumber_js__WEBPACK_IMPORTED_MODULE_0__["BigNumber"].isBigNumber(number) ? number.toNumber() : number;
  if (!Number.isFinite(finalNumber)) return "";
  const value = currency.toLowerCase() === "usd" ? parseFloat(Number(finalNumber).toFixed(2)) : parseFloat(Number(finalNumber).toFixed(5));
  const tilde = value > 0 ? "~ " : "";
  return "".concat(currency.toLowerCase() === "usd" || noTilde ? "" : tilde).concat(Number(value), " ").concat(currency.toUpperCase());
};
const addressSlicer = function (address) {
  let sliceLength = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;

  if (address.length < 11) {
    return address;
  }

  if (typeof address !== "string") return "";
  return "".concat(address.slice(0, sliceLength), "...").concat(address.slice(-sliceLength));
};
const significantDigits = function (number) {
  let perc = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  let length_ = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 2;
  let input = !bignumber_js__WEBPACK_IMPORTED_MODULE_0__["BigNumber"].isBigNumber(number) ? new bignumber_js__WEBPACK_IMPORTED_MODULE_0__["BigNumber"](number) : number;
  if (input.isZero()) return input;

  if (perc) {
    input = input.times(new bignumber_js__WEBPACK_IMPORTED_MODULE_0__["BigNumber"](100));
  }

  let depth;

  if (input.gte(new bignumber_js__WEBPACK_IMPORTED_MODULE_0__["BigNumber"](1))) {
    depth = length_;
  } else {
    depth = length_ - 1 + Math.ceil(Math.log10(new bignumber_js__WEBPACK_IMPORTED_MODULE_0__["BigNumber"]("1").div(input).toNumber()));
  }

  const shift = new bignumber_js__WEBPACK_IMPORTED_MODULE_0__["BigNumber"](10).pow(new bignumber_js__WEBPACK_IMPORTED_MODULE_0__["BigNumber"](depth));
  const roundedNumber = Math.round(shift.times(input).toNumber()) / shift.toNumber();
  return roundedNumber;
};
const formatDate = inputDate => {
  const monthList = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
  const date = new Date(inputDate);
  const day = date.getDate();
  const month = monthList[date.getMonth()];
  const year = date.getFullYear();
  return "".concat(day, " ").concat(month, " ").concat(year);
};
const formatTime = time => {
  return new Date(time).toTimeString().slice(0, 8);
};
/**
 * Network utilities
 */

const transactionMatchesNetwork = (transaction, chainId) => {
  if (typeof transaction.chainId !== "undefined") {
    return transaction.chainId === chainId;
  }

  return false;
};
/**
 * Signing utils
 */

const hashMessage = message => {
  const bufferedMessage = Buffer.from(message, "utf8");
  const el = Object(ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__["hashPersonalMessage"])(bufferedMessage);
  return el;
};
const signMessage = (privateKey, data) => {
  const privKey = Buffer.from(privateKey, "hex");
  const message = Object(ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__["stripHexPrefix"])(data);
  const msgSig = Object(ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__["ecsign"])(Buffer.from(message, "hex"), privKey);
  const rawMsgSig = concatSig(Object(ethereumjs_util__WEBPACK_IMPORTED_MODULE_1__["intToBuffer"])(msgSig.v), msgSig.r, msgSig.s);
  return rawMsgSig;
};
/**
 * popup handler utils
 */

function getPopupFeatures(_ref) {
  let {
    width: w,
    height: h
  } = _ref;
  // Fixes dual-screen position                             Most browsers      Firefox
  const dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;
  const dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;
  const width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : window.screen.width;
  const height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : window.screen.height;
  const systemZoom = 1; // No reliable estimate

  const left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);
  const top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);
  const features = "titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=".concat(h / systemZoom, ",width=").concat(w / systemZoom, ",top=").concat(top, ",left=").concat(left);
  return features;
}
const broadcastChannelOptions = {
  // type: 'localstorage', // (optional) enforce a type, oneOf['native', 'idb', 'localstorage', 'node']
  webWorkerSupport: false // (optional) set this to false if you know that your channel will never be used in a WebWorker (increases performance)

};
function getCustomDeviceInfo() {
  var _navigator;

  if ((_navigator = navigator) !== null && _navigator !== void 0 && _navigator.brave) {
    return {
      browser: "Brave"
    };
  }
}
class UserError extends Error {}
const handleRedirectParameters = (hash, queryParameters) => {
  const hashParameters = {};
  const hashUrl = new URL("".concat(window.location.origin, "/?").concat(hash.slice(1)));
  hashUrl.searchParams.forEach((value, key) => {
    hashParameters[key] = value;
  });
  let instanceParameters = {};
  let error = "";

  if (!queryParameters.windowId) {
    if (Object.keys(hashParameters).length > 0 && hashParameters.state) {
      instanceParameters = JSON.parse(window.atob(decodeURIComponent(decodeURIComponent(hashParameters.state)))) || {};
      error = hashParameters.error_description || hashParameters.error || error;
    } else if (Object.keys(queryParameters).length > 0 && queryParameters.state) {
      instanceParameters = JSON.parse(window.atob(decodeURIComponent(decodeURIComponent(queryParameters.state)))) || {};
      if (queryParameters.error) error = queryParameters.error;
    }
  }

  return {
    error,
    instanceParameters,
    hashParameters
  };
};

/***/ }),
/* 12 */
/***/ (function(module, exports) {

module.exports = require("eth-rpc-errors");

/***/ }),
/* 13 */
/***/ (function(module, exports) {

module.exports = require("lodash");

/***/ }),
/* 14 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return createSwappableProxy; });
function createSwappableProxy(initialTarget) {
  let target = initialTarget;

  let setTarget = newTarget => {
    target = newTarget;
  };

  const proxy = new Proxy({}, {
    get: (_, name) => {
      // override `setTarget` access
      if (name === "setTarget") return setTarget;
      return target[name];
    },
    set: (_, name, value) => {
      // allow `setTarget` overrides
      if (name === "setTarget") {
        setTarget = value;
        return true;
      }

      target[name] = value;
      return true;
    }
  });
  return proxy;
}

/***/ }),
/* 15 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return createRandomId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return providerFromEngine; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return providerFromMiddleware; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return providerAsMiddleware; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var json_rpc_random_id__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(36);
/* harmony import */ var json_rpc_random_id__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(json_rpc_random_id__WEBPACK_IMPORTED_MODULE_2__);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }



const createRandomId = json_rpc_random_id__WEBPACK_IMPORTED_MODULE_2___default()();
function providerFromEngine(engine) {
  const provider = new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__["SafeEventEmitter"](); // handle both rpc send methods

  provider.sendAsync = async req => {
    const res = await engine.handle(req);

    if (res.error) {
      throw new Error(res.error);
    }

    return res.result;
  }; // eslint-disable-next-line @typescript-eslint/no-explicit-any


  provider.send = (req, callback) => {
    if (typeof callback !== "function") {
      throw new Error('Must provide callback to "send" method.');
    }

    engine.handle(req, callback);
  }; // forward notifications


  if (engine.on) {
    engine.on("notification", message => {
      provider.emit("data", null, message);
    });
  }

  provider.request = async args => {
    const req = _objectSpread(_objectSpread({}, args), {}, {
      id: createRandomId(),
      jsonrpc: "2.0"
    });

    const res = await provider.sendAsync(req);
    return res;
  };

  return provider;
}
function providerFromMiddleware(middleware) {
  const engine = new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__["JRPCEngine"]();
  engine.push(middleware);
  const provider = providerFromEngine(engine);
  return provider;
}
function providerAsMiddleware(provider) {
  return async (req, res, _next, end) => {
    // send request to provider
    try {
      const providerRes = await provider.sendAsync(req);
      res.result = providerRes;
      return end();
    } catch (error) {
      return end(error.message);
    }
  };
}

/***/ }),
/* 16 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return createChangeProviderMiddlewareMiddleware; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return createTopupMiddleware; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return createGenericJRPCMiddleware; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return createCommunicationMiddleware; });
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1);


function createChangeProviderMiddlewareMiddleware(_ref) {
  let {
    changeProvider
  } = _ref;
  return Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_0__["createAsyncMiddleware"])(async (request, response, next) => {
    const {
      method
    } = request;
    if (method !== _enums__WEBPACK_IMPORTED_MODULE_1__[/* COMMUNICATION_JRPC_METHODS */ "p"].SET_PROVIDER) return next();
    if (!changeProvider) throw new Error("CommunicationMiddleware - opts.changeProvider not provided");
    response.result = await changeProvider(request);
  });
}
function createTopupMiddleware(_ref2) {
  let {
    topup
  } = _ref2;
  return Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_0__["createAsyncMiddleware"])(async (request, response, next) => {
    const {
      method
    } = request;
    if (method !== _enums__WEBPACK_IMPORTED_MODULE_1__[/* COMMUNICATION_JRPC_METHODS */ "p"].TOPUP) return next();
    if (!topup) throw new Error("CommunicationMiddleware - opts.topup not provided");
    response.result = await topup(request);
  });
}
function createGenericJRPCMiddleware(targetMethod, handler) {
  return Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_0__["createAsyncMiddleware"])(async (request, response, next) => {
    const {
      method
    } = request;
    if (method !== targetMethod) return next();
    if (!handler) throw new Error("CommunicationMiddleware - ".concat(targetMethod, " not provided"));
    const result = await handler(request);

    if (!result) {
      return next();
    }

    response.result = result;
    return undefined;
  });
}
function createCommunicationMiddleware(providerHandlers) {
  const {
    getUserInfo,
    getWalletInstanceId,
    topup,
    logout,
    changeProvider,
    setIFrameStatus,
    handleWindowRpc,
    getProviderState,
    loginWithPrivateKey
  } = providerHandlers;
  return Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_0__["mergeMiddleware"])([createChangeProviderMiddlewareMiddleware({
    changeProvider
  }), createTopupMiddleware({
    topup
  }), Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_0__["createScaffoldMiddleware"])({
    [_enums__WEBPACK_IMPORTED_MODULE_1__[/* COMMUNICATION_JRPC_METHODS */ "p"].LOGOUT]: logout,
    [_enums__WEBPACK_IMPORTED_MODULE_1__[/* COMMUNICATION_JRPC_METHODS */ "p"].WALLET_INSTANCE_ID]: getWalletInstanceId,
    [_enums__WEBPACK_IMPORTED_MODULE_1__[/* COMMUNICATION_JRPC_METHODS */ "p"].USER_INFO]: getUserInfo,
    [_enums__WEBPACK_IMPORTED_MODULE_1__[/* COMMUNICATION_JRPC_METHODS */ "p"].IFRAME_STATUS]: setIFrameStatus,
    // Do this in the orchestrator because communicationWindowManager needs to be passed into PopupHandlers
    [_enums__WEBPACK_IMPORTED_MODULE_1__[/* COMMUNICATION_JRPC_METHODS */ "p"].OPENED_WINDOW]: handleWindowRpc,
    [_enums__WEBPACK_IMPORTED_MODULE_1__[/* COMMUNICATION_JRPC_METHODS */ "p"].CLOSED_WINDOW]: handleWindowRpc,
    [_enums__WEBPACK_IMPORTED_MODULE_1__[/* COMMUNICATION_JRPC_METHODS */ "p"].GET_PROVIDER_STATE]: getProviderState
  }), createGenericJRPCMiddleware(_enums__WEBPACK_IMPORTED_MODULE_1__[/* COMMUNICATION_JRPC_METHODS */ "p"].LOGIN_WITH_PRIVATE_KEY, loginWithPrivateKey)]);
}

/***/ }),
/* 17 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LOGIN_PROVIDER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return PAYMENT_PROVIDER; });
/**
 * State change callbacks
 */

/**
 * Base controller configuration
 */

/**
 * Base state representation
 */
const LOGIN_PROVIDER = {
  GOOGLE: "google",
  FACEBOOK: "facebook",
  REDDIT: "reddit",
  DISCORD: "discord",
  TWITCH: "twitch",
  APPLE: "apple",
  LINE: "line",
  GITHUB: "github",
  KAKAO: "kakao",
  LINKEDIN: "linkedin",
  TWITTER: "twitter",
  WEIBO: "weibo",
  WECHAT: "wechat",
  EMAIL_PASSWORDLESS: "email_passwordless"
};
/**
 * {@label loginProviderType}
 */

const PAYMENT_PROVIDER = {
  MOONPAY: "moonpay",
  WYRE: "wyre",
  RAMPNETWORK: "rampnetwork",
  XANPOOL: "xanpool",
  MERCURYO: "mercuryo",
  TRANSAK: "transak"
};

/***/ }),
/* 18 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return ACTIVITY_ACTION; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ACCOUNT_CATEGORY; });
const ACTIVITY_ACTION = {
  ACTIVITY_ACTION_ALL: "walletActivity.allTransactions",
  ACTIVITY_ACTION_SEND: "walletActivity.send",
  ACTIVITY_ACTION_RECEIVE: "walletActivity.receive",
  ACTIVITY_ACTION_TOPUP: "walletActivity.topup"
};
const ACCOUNT_CATEGORY = {
  NORMAL: "normal",
  THRESHOLD: "threshold",
  IMPORTED: "imported"
};

/***/ }),
/* 19 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";


/***/ }),
/* 20 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BaseBlockTracker; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _BaseController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6);


const sec = 1000;

const calculateSum = (accumulator, currentValue) => accumulator + currentValue;

const blockTrackerEvents = ["sync", "latest"];
class BaseBlockTracker extends _BaseController__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"] {
  constructor(_ref) {
    let {
      config = {},
      state = {}
    } = _ref;
    super({
      config,
      state
    }); // config

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "name", "BaseBlockTracker");

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_blockResetTimeout", void 0);

    this.defaultState = {
      _currentBlock: {
        idempotencyKey: ""
      },
      _isRunning: false
    };
    this.defaultConfig = {
      blockResetDuration: 20 * sec
    };
    this.initialize(); // bind functions for internal use

    this._onNewListener = this._onNewListener.bind(this);
    this._onRemoveListener = this._onRemoveListener.bind(this);
    this._resetCurrentBlock = this._resetCurrentBlock.bind(this); // listen for handler changes

    this._setupInternalEvents();
  }

  isRunning() {
    return this.state._isRunning;
  }

  getCurrentBlock() {
    return this.state._currentBlock;
  }

  async getLatestBlock() {
    // return if available
    if (this.state._currentBlock) {
      return this.state._currentBlock;
    } // wait for a new latest block


    const latestBlock = await new Promise(resolve => this.once("latest", newState => {
      if (newState._currentBlock) {
        resolve(newState._currentBlock);
      }
    })); // return newly set current block

    return latestBlock;
  } // dont allow module consumer to remove our internal event listeners


  removeAllListeners(eventName) {
    if (eventName) {
      super.removeAllListeners(eventName);
    } else {
      super.removeAllListeners();
    } // re-add internal events


    this._setupInternalEvents(); // trigger stop check just in case


    this._onRemoveListener();

    return this;
  }
  /**
   * To be implemented in subclass.
   */


  _start() {// default behavior is noop
  }
  /**
   * To be implemented in subclass.
   */


  _end() {// default behavior is noop
  }

  _newPotentialLatest(newBlock) {
    const currentBlock = this.state._currentBlock; // only update if blok number is higher

    if (currentBlock && newBlock.idempotencyKey === currentBlock.idempotencyKey) {
      return;
    }

    this._setCurrentBlock(newBlock);
  }

  _setupInternalEvents() {
    // first remove listeners for idempotency
    this.removeListener("newListener", this._onNewListener);
    this.removeListener("removeListener", this._onRemoveListener); // then add them

    this.on("removeListener", this._onRemoveListener);
    this.on("newListener", this._onNewListener);
  }

  _onNewListener() {
    this._maybeStart();
  }

  _onRemoveListener() {
    // `removeListener` is called *after* the listener is removed
    if (this._getBlockTrackerEventCount() > 0) {
      return;
    }

    this._maybeEnd();
  }

  _maybeStart() {
    if (this.state._isRunning) {
      return;
    }

    this.state._isRunning = true; // cancel setting latest block to stale

    this._cancelBlockResetTimeout();

    this._start();
  }

  _maybeEnd() {
    if (!this.state._isRunning) {
      return;
    }

    this.state._isRunning = false;

    this._setupBlockResetTimeout();

    this._end();
  }

  _getBlockTrackerEventCount() {
    return blockTrackerEvents.map(eventName => this.listenerCount(eventName)).reduce(calculateSum);
  }

  _setCurrentBlock(newBlock) {
    const oldBlock = this.state._currentBlock;
    this.update({
      _currentBlock: newBlock
    });
    this.emit("latest", newBlock);
    this.emit("sync", {
      oldBlock,
      newBlock
    });
  }

  _setupBlockResetTimeout() {
    // clear any existing timeout
    this._cancelBlockResetTimeout(); // clear latest block when stale


    this._blockResetTimeout = setTimeout(this._resetCurrentBlock, this.config.blockResetDuration); // nodejs - dont hold process open

    if (this._blockResetTimeout.unref) {
      this._blockResetTimeout.unref();
    }
  }

  _cancelBlockResetTimeout() {
    if (this._blockResetTimeout) {
      clearTimeout(this._blockResetTimeout);
    }
  }

  _resetCurrentBlock() {
    this.update({
      _currentBlock: {
        idempotencyKey: ""
      }
    });
  }

}

/***/ }),
/* 21 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";


/***/ }),
/* 22 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return createEventEmitterProxy; });
const filterNoop = () => true;

const internalEvents = ["newListener", "removeListener"];

const externalEventFilter = name => !internalEvents.includes(name);

function getRawListeners(eventEmitter, name) {
  // prefer native
  return eventEmitter.rawListeners(name);
}

function createEventEmitterProxy(initialTarget, opts) {
  // parse options
  const finalOpts = opts || {};
  let eventFilter = finalOpts.eventFilter || filterNoop;
  if (typeof eventFilter === "string" && eventFilter === "skipInternal") eventFilter = externalEventFilter;
  if (typeof eventFilter !== "function") throw new Error("createEventEmitterProxy - Invalid eventFilter");
  let target = initialTarget;

  let setTarget = newTarget => {
    const oldTarget = target;
    target = newTarget;
    oldTarget.eventNames().filter(eventFilter).forEach(name => {
      getRawListeners(oldTarget, name).forEach(handler => newTarget.on(name, handler));
    }); // remove old listeners

    oldTarget.removeAllListeners();
  };

  const proxy = new Proxy({}, {
    get: (_, name) => {
      // override `setTarget` access
      if (name === "setTarget") return setTarget;
      return target[name];
    },
    set: (_, name, value) => {
      // allow `setTarget` overrides
      if (name === "setTarget") {
        setTarget = value;
        return true;
      }

      target[name] = value;
      return true;
    }
  });
  return proxy;
}

/***/ }),
/* 23 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BaseCurrencyController; });
/* harmony import */ var _BaseController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6);

// every ten minutes
const POLLING_INTERVAL = 600000;
class BaseCurrencyController extends _BaseController__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"] {
  constructor(_ref) {
    let {
      config = {},
      state
    } = _ref;
    super({
      config,
      state
    });
    this.defaultState = {
      currentCurrency: "usd",
      conversionRate: 0,
      conversionDate: "N/A",
      nativeCurrency: "ETH"
    };
    this.defaultConfig = {
      pollInterval: POLLING_INTERVAL
    };
    this.initialize();
  } //
  // PUBLIC METHODS
  //


  getNativeCurrency() {
    return this.state.nativeCurrency;
  }

  setNativeCurrency(nativeCurrency) {
    this.update({
      nativeCurrency,
      ticker: nativeCurrency
    });
  }

  getCurrentCurrency() {
    return this.state.currentCurrency;
  }

  setCurrentCurrency(currentCurrency) {
    this.update({
      currentCurrency
    });
  }
  /**
   * A getter for the conversionRate property
   *
   * @returns The conversion rate from ETH to the selected currency.
   *
   */


  getConversionRate() {
    return this.state.conversionRate;
  }

  setConversionRate(conversionRate) {
    this.update({
      conversionRate
    });
  }
  /**
   * A getter for the conversionDate property
   *
   * @returns The date at which the conversion rate was set. Expressed in milliseconds since midnight of
   * January 1, 1970
   *
   */


  getConversionDate() {
    return this.state.conversionDate;
  }

  setConversionDate(conversionDate) {
    this.update({
      conversionDate
    });
  }

}

/***/ }),
/* 24 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";


/***/ }),
/* 25 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BaseEmbedController; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _BaseController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6);
/* harmony import */ var _createSwappableProxy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(14);
/* harmony import */ var _Network_INetworkController__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(15);
/* harmony import */ var _CommunicationMethodMiddleware__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(16);






class BaseEmbedController extends _BaseController__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"] {
  constructor(_ref) {
    let {
      config = {},
      state
    } = _ref;
    super({
      config,
      state
    });

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "_communicationProviderProxy", void 0);

    this.defaultState = {
      buttonPosition: "bottom-right",
      isIFrameFullScreen: true,
      apiKey: "torus-default",
      oauthModalVisibility: false,
      loginInProgress: false,
      dappMetadata: {
        name: "",
        icon: ""
      }
    };
    this.initialize();
  }
  /**
   * Called by orchestrator once while initializing the class
   * @param handlers - JRPC handlers for provider
   * @returns - provider - Returns the providerProxy
   */


  initializeProvider(handlers) {
    const engine = new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__["JRPCEngine"]();
    const communicationMiddleware = Object(_CommunicationMethodMiddleware__WEBPACK_IMPORTED_MODULE_5__[/* createCommunicationMiddleware */ "b"])(handlers);
    engine.push(communicationMiddleware);
    const communicationProvider = Object(_Network_INetworkController__WEBPACK_IMPORTED_MODULE_4__[/* providerFromEngine */ "c"])(engine);
    this.setCommunicationProvider(communicationProvider);
  }

  setCommunicationProvider(communicationProvider) {
    if (this._communicationProviderProxy) {
      // eslint-disable-next-line @typescript-eslint/ban-ts-comment
      // @ts-ignore
      this._communicationProviderProxy.setTarget(communicationProvider);
    } else {
      this._communicationProviderProxy = Object(_createSwappableProxy__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"])(communicationProvider);
    }
  }

}

/***/ }),
/* 26 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1);




class CommunicationWindowManager extends _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_1__["SafeEventEmitter"] {
  constructor() {
    super(...arguments);

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "handleWindowRpc", (request, response, next, end) => {
      const {
        method,
        params
      } = request;

      if (method === _enums__WEBPACK_IMPORTED_MODULE_2__[/* COMMUNICATION_JRPC_METHODS */ "p"].OPENED_WINDOW) {
        const {
          windowId
        } = params; // I've been informed that a window has been opened

        this.emit("".concat(windowId, ":opened"));
        response.result = true;
        end();
      } else if (method === _enums__WEBPACK_IMPORTED_MODULE_2__[/* COMMUNICATION_JRPC_METHODS */ "p"].CLOSED_WINDOW) {
        const {
          windowId
        } = params; // I've been informed that a window has been closed

        this.emit("".concat(windowId, ":closed"));
        response.result = true;
        end();
      } else {
        next();
      }
    });
  }

}

/* harmony default export */ __webpack_exports__["a"] = (CommunicationWindowManager);

/***/ }),
/* 27 */
/***/ (function(module, exports) {



/***/ }),
/* 28 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BaseKeyringController; });
/* harmony import */ var _BaseController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);


class BaseKeyringController extends _BaseController__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"] {
  constructor(_ref) {
    var _state$wallets;

    let {
      config = {},
      state
    } = _ref;
    super({
      config,
      state
    });
    this.defaultState = {
      wallets: (_state$wallets = state.wallets) !== null && _state$wallets !== void 0 ? _state$wallets : []
    };
    this.initialize();
  } // for signing auth message


  signAuthMessage(address, message) {
    const keyring = this.state.wallets.find(x => x.address === address);

    if (!keyring) {
      throw new Error("key does not exist");
    }

    const hashedMessage = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[/* hashMessage */ "l"])(message).toString("hex");
    const rawMessageSig = Object(_utils__WEBPACK_IMPORTED_MODULE_1__[/* signMessage */ "p"])(keyring.privateKey, hashedMessage);
    return rawMessageSig;
  }

}

/***/ }),
/* 29 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";


/***/ }),
/* 30 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return createFetchConfigFromReq; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return createFetchMiddleware; });
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var eth_rpc_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12);
/* harmony import */ var eth_rpc_errors__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(eth_rpc_errors__WEBPACK_IMPORTED_MODULE_1__);


const RETRIABLE_ERRORS = [// ignore server overload errors
"Gateway timeout", "ETIMEDOUT", // ignore server sent html error pages
// or truncated json responses
"failed to parse response body", // ignore errors where http req failed to establish
"Failed to fetch"];

function checkForHttpErrors(fetchRes) {
  // check for errors
  switch (fetchRes.status) {
    case 405:
      throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_1__["ethErrors"].rpc.methodNotFound();

    case 418:
      throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_1__["ethErrors"].rpc.internal({
        message: "Request is being rate limited."
      });

    case 503:
    case 504:
      throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_1__["ethErrors"].rpc.internal({
        message: "Gateway timeout. The request took too long to process." + "This can happen when querying over too wide a block range."
      });

    default:
      break;
  }
}

function timeout(duration) {
  return new Promise(resolve => setTimeout(resolve, duration));
}

function parseResponse(fetchRes, body) {
  // check for error code
  if (fetchRes.status !== 200) {
    throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_1__["ethErrors"].rpc.internal({
      message: "Non-200 status code: '".concat(fetchRes.status, "'"),
      data: body
    });
  } // check for rpc error


  if (body.error) {
    throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_1__["ethErrors"].rpc.internal({
      data: body.error
    });
  } // return successful result


  return body.result;
}

function createFetchConfigFromReq(_ref) {
  let {
    req,
    rpcTarget,
    originHttpHeaderKey
  } = _ref;
  const parsedUrl = new URL(rpcTarget); // prepare payload
  // copy only canonical json rpc properties

  const payload = {
    id: req.id,
    jsonrpc: req.jsonrpc,
    method: req.method,
    params: req.params
  }; // extract 'origin' parameter from request

  const originDomain = req.origin; // serialize request body

  const serializedPayload = JSON.stringify(payload); // configure fetch params

  const fetchParams = {
    method: "POST",
    headers: {
      Accept: "application/json",
      "Content-Type": "application/json"
    },
    body: serializedPayload
  }; // optional: add request origin as header

  if (originHttpHeaderKey && originDomain) {
    fetchParams.headers[originHttpHeaderKey] = originDomain;
  }

  return {
    fetchUrl: parsedUrl.href,
    fetchParams
  };
}
function createFetchMiddleware(_ref2) {
  let {
    rpcTarget,
    originHttpHeaderKey
  } = _ref2;
  return Object(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_0__["createAsyncMiddleware"])(async (req, res, _next) => {
    const {
      fetchUrl,
      fetchParams
    } = createFetchConfigFromReq({
      req,
      rpcTarget,
      originHttpHeaderKey
    }); // attempt request multiple times

    const maxAttempts = 5;
    const retryInterval = 1000;

    for (let attempt = 0; attempt < maxAttempts; attempt++) {
      try {
        const fetchRes = await fetch(fetchUrl, fetchParams); // check for http errrors

        checkForHttpErrors(fetchRes); // parse response body

        const fetchBody = await fetchRes.json();
        const result = parseResponse(fetchRes, fetchBody); // set result and exit retry loop

        res.result = result;
        return;
      } catch (err) {
        const errMsg = err.toString();
        const isRetriable = RETRIABLE_ERRORS.some(phrase => errMsg.includes(phrase)); // re-throw error if not retriable

        if (!isRetriable) {
          throw err;
        }
      } // delay before retrying


      await timeout(retryInterval);
    }
  });
}

/***/ }),
/* 31 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return createLoggerMiddleware; });
/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);
/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_0__);

function createLoggerMiddleware(options) {
  return function loggerMiddleware(request, response, next) {
    next(callback => {
      if (response.error) {
        loglevel__WEBPACK_IMPORTED_MODULE_0___default.a.warn("Error in RPC response:\n", response);
      }

      if (request.isTorusInternal) return;
      loglevel__WEBPACK_IMPORTED_MODULE_0___default.a.info("RPC (".concat(options.origin, "):"), request, "->", response);
      callback();
    });
  };
}

/***/ }),
/* 32 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return createOriginMiddleware; });
function createOriginMiddleware(options) {
  return function originMiddleware(request, _, next) {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    request.origin = options.origin;
    next();
  };
}

/***/ }),
/* 33 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return DEFAULT_PREFERENCES; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BasePreferencesController; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5);
/* harmony import */ var _toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var bowser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(37);
/* harmony import */ var bowser__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bowser__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2);
/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _BaseController__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(6);
/* harmony import */ var _interfaces__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(17);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(3);
/* harmony import */ var _IPreferencesController__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(18);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }








 // By default, poll every 3 minutes

const DEFAULT_INTERVAL = 180 * 1000;
const DEFAULT_PREFERENCES = {
  selectedCurrency: "USD",
  theme: "dark",
  locale: "en-US",
  accountType: _IPreferencesController__WEBPACK_IMPORTED_MODULE_8__[/* ACCOUNT_CATEGORY */ "a"].NORMAL,
  contacts: [],
  jwtToken: "",
  fetchedPastTx: [],
  pastTransactions: [],
  paymentTx: [],
  defaultPublicAddress: "",
  customTokens: [],
  customNfts: [],
  crashReport: true,
  userInfo: {
    aggregateVerifier: "",
    email: "",
    name: "",
    profileImage: "",
    typeOfLogin: _interfaces__WEBPACK_IMPORTED_MODULE_6__[/* LOGIN_PROVIDER */ "a"].GOOGLE,
    verifier: "",
    verifierId: ""
  }
};
/**
 * Controller that stores shared settings and exposes convenience methods
 */

class BasePreferencesController extends _BaseController__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"] {
  /**
   * Name of this controller used during composition
   */

  /**
   * Creates a PreferencesController instance
   *
   * @param config - Initial options used to configure this controller
   * @param state - Initial state to set on this controller
   */
  constructor(_ref) {
    let {
      config,
      state,
      defaultPreferences,
      signAuthMessage
    } = _ref;
    super({
      config,
      state
    });

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "name", "PreferencesController");

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "iframeOrigin", void 0);

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "signAuthMessage", void 0);

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "defaultPreferences", void 0);

    if (!config.api) {
      throw new Error("PreferencesController - no api specified in config.");
    }

    this.defaultState = {
      identities: {},
      selectedAddress: "",
      lastErrorMessage: "",
      lastSuccessMessage: ""
    };
    this.defaultConfig = {
      api: config.api,
      pollInterval: DEFAULT_INTERVAL
    };
    this.initialize();
    this.defaultPreferences = _objectSpread(_objectSpread({}, DEFAULT_PREFERENCES), defaultPreferences);
    this.signAuthMessage = signAuthMessage;
  }

  setIframeOrigin(origin) {
    this.iframeOrigin = origin;
  }

  getAddressState(address) {
    const selectedAddress = address || this.state.selectedAddress;
    return this.state.identities[selectedAddress];
  }
  /**
   * Sets selected address
   *
   * @param selectedAddress - casper account hash
   */


  setSelectedAddress(selectedAddress) {
    this.update({
      selectedAddress
    });
  }

  async getUser(address) {
    const user = await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["get"])("".concat(this.config.api, "/user?fetchTx=false"), this.headers(address), {
      useAPIKey: true
    });
    return user.data;
  }

  async createUser(params) {
    const {
      selectedCurrency,
      theme,
      verifier,
      verifierId,
      locale,
      address
    } = params;
    const userPayload = {
      default_currency: selectedCurrency,
      theme,
      verifier,
      verifier_id: verifierId,
      locale
    };
    await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["post"])("".concat(this.config.api, "/user"), userPayload, this.headers(address), {
      useAPIKey: true
    });
    this.updateState({
      theme,
      defaultPublicAddress: address,
      selectedCurrency,
      locale
    }, address);
  }

  async storeUserLogin(params) {
    const {
      verifierId,
      verifier,
      options,
      address
    } = params;

    if (!options.rehydrate) {
      const browser = bowser__WEBPACK_IMPORTED_MODULE_2___default.a.getParser(window.navigator.userAgent);
      const specialBrowser = Object(_utils__WEBPACK_IMPORTED_MODULE_7__[/* getCustomDeviceInfo */ "h"])();
      const recordLoginPayload = {
        os: browser.getOSName(),
        os_version: browser.getOSVersion() || "unidentified",
        browser: (specialBrowser === null || specialBrowser === void 0 ? void 0 : specialBrowser.browser) || browser.getBrowserName() || "unidentified",
        browser_version: browser.getBrowserVersion() || "unidentified",
        platform: browser.getPlatform().type || "desktop",
        hostname: this.iframeOrigin,
        verifier,
        verifier_id: verifierId
      };
      await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["post"])("".concat(this.config.api, "/user/recordLogin"), recordLoginPayload, this.headers(address), {
        useAPIKey: true
      });
    }
  }

  async setCrashReport(isEnabled) {
    var _this$getAddressState;

    if (isEnabled === ((_this$getAddressState = this.getAddressState()) === null || _this$getAddressState === void 0 ? void 0 : _this$getAddressState.crashReport)) return true;

    try {
      await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["patch"])("".concat(this.config.api, "/user"), {
        enable_crash_reporter: isEnabled
      }, this.headers(), {
        useAPIKey: true
      });
      this.updateState({
        crashReport: isEnabled
      });
      return true;
    } catch (error) {
      loglevel__WEBPACK_IMPORTED_MODULE_4___default.a.error(error);
      return false;
    }
  }

  async setUserTheme(theme) {
    var _this$getAddressState2;

    if (theme === ((_this$getAddressState2 = this.getAddressState()) === null || _this$getAddressState2 === void 0 ? void 0 : _this$getAddressState2.theme)) return true;

    try {
      await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["patch"])("".concat(this.config.api, "/user"), {
        theme
      }, this.headers(), {
        useAPIKey: true
      });
      this.updateState({
        theme
      });
      return true;
    } catch (error) {
      loglevel__WEBPACK_IMPORTED_MODULE_4___default.a.error(error);
      return false;
    }
  }

  async setUserLocale(locale) {
    var _this$getAddressState3;

    if (locale === ((_this$getAddressState3 = this.getAddressState()) === null || _this$getAddressState3 === void 0 ? void 0 : _this$getAddressState3.locale)) return;

    try {
      await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["patch"])("".concat(this.config.api, "/user"), {
        locale
      }, this.headers(), {
        useAPIKey: true
      });
      this.updateState({
        locale
      });
      return true;
    } catch (error) {
      loglevel__WEBPACK_IMPORTED_MODULE_4___default.a.error("unable to set locale", error);
      return false;
    }
  }

  async setSelectedCurrency(payload) {
    var _this$getAddressState4;

    if (payload.selectedCurrency === ((_this$getAddressState4 = this.getAddressState()) === null || _this$getAddressState4 === void 0 ? void 0 : _this$getAddressState4.selectedCurrency)) return true;

    try {
      await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["patch"])("".concat(this.config.api, "/user"), {
        default_currency: payload.selectedCurrency
      }, this.headers(), {
        useAPIKey: true
      });
      this.updateState({
        selectedCurrency: payload.selectedCurrency
      });
      return true;
    } catch (error) {
      loglevel__WEBPACK_IMPORTED_MODULE_4___default.a.error(error);
      return false;
    }
  }

  async addContact(contact) {
    try {
      var _this$getAddressState5;

      const response = await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["post"])("".concat(this.config.api, "/contact"), contact, this.headers(), {
        useAPIKey: true
      });
      this.updateState({
        contacts: [...(((_this$getAddressState5 = this.getAddressState()) === null || _this$getAddressState5 === void 0 ? void 0 : _this$getAddressState5.contacts) || []), response.data]
      });
      return true;
    } catch (error) {
      loglevel__WEBPACK_IMPORTED_MODULE_4___default.a.error("unable to add contact", error);
      return false;
    }
  }

  async deleteContact(contactId) {
    try {
      var _this$getAddressState6;

      const response = await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["remove"])("".concat(this.config.api, "/contact/").concat(contactId), {}, this.headers(), {
        useAPIKey: true
      });
      const finalContacts = (_this$getAddressState6 = this.getAddressState()) === null || _this$getAddressState6 === void 0 ? void 0 : _this$getAddressState6.contacts.filter(contact => contact.id !== response.data.id);
      if (finalContacts) this.updateState({
        contacts: [...finalContacts]
      });
      return true;
    } catch (error) {
      loglevel__WEBPACK_IMPORTED_MODULE_4___default.a.error("unable to delete contact", error);
      return false;
    }
  }

  async revokeDiscord(idToken) {
    try {
      const resp = await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["post"])("".concat(this.config.api, "/revoke/discord"), {
        token: idToken
      }, this.headers(), {
        useAPIKey: true
      });
      loglevel__WEBPACK_IMPORTED_MODULE_4___default.a.info(resp);
    } catch (error) {
      loglevel__WEBPACK_IMPORTED_MODULE_4___default.a.error(error);
    }
  }

  async patchPastTx(body, address) {
    try {
      const response = await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["patch"])("".concat(this.config.api, "/transaction"), body, this.headers(address), {
        useAPIKey: true
      });
      loglevel__WEBPACK_IMPORTED_MODULE_4___default.a.info("successfully patched", response);
    } catch (error) {
      loglevel__WEBPACK_IMPORTED_MODULE_4___default.a.error("unable to patch tx", error);
    }
  }

  async postPastTx(tx, address) {
    try {
      const response = await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["post"])("".concat(this.config.api, "/transaction"), tx, this.headers(address), {
        useAPIKey: true
      });
      loglevel__WEBPACK_IMPORTED_MODULE_4___default.a.info("successfully posted tx", response);
      return response;
    } catch (error) {
      loglevel__WEBPACK_IMPORTED_MODULE_4___default.a.error(error, "unable to insert transaction");
    }
  }

  async getWalletOrders(address) {
    try {
      const response = await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["get"])("".concat(this.config.api, "/transaction"), this.headers(address), {
        useAPIKey: true
      });
      return response.success ? response.data ? response.data : [] : [];
    } catch (error) {
      loglevel__WEBPACK_IMPORTED_MODULE_4___default.a.error("unable to get wallet orders tx", error);
      return [];
    }
  }

  async getTopUpOrders(address) {
    try {
      const response = await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["get"])("".concat(this.config.commonApiHost, "/transaction"), this.headers(address), {
        useAPIKey: true
      });
      return response.data || [];
    } catch (error) {
      loglevel__WEBPACK_IMPORTED_MODULE_4___default.a.error("unable to fetch past Top up orders", error);
    }
  }

  async getBillBoardData() {
    try {
      const response = await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["get"])("".concat(this.config.api, "/billboard"), this.headers(), {
        useAPIKey: true
      });
      return response.success ? response.data : [];
    } catch (error) {
      loglevel__WEBPACK_IMPORTED_MODULE_4___default.a.error("unable to get billboard data", error);
      return [];
    }
  }

  async getMessageForSigning(publicAddress) {
    const response = await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["post"])("".concat(this.config.api, "/auth/message"), {
      public_address: publicAddress
    }, {}, {
      useAPIKey: true
    });
    return response.message;
  }

  async getTwitterId(payload) {
    const res = await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["get"])("".concat(this.config.api, "/twitter?screen_name=").concat(payload.nick), this.headers(), {
      useAPIKey: true
    });
    return "".concat(payload.typeOfLogin.toLowerCase(), "|").concat(res.data.toString());
  }

  async sendEmail(payload) {
    return Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["post"])("".concat(this.config.api, "/transaction/sendemail"), payload.emailObject, this.headers(), {
      useAPIKey: true
    });
  }

  async refreshJwt() {
    const address = this.state.selectedAddress;
    const messageToSign = await this.getMessageForSigning(address);
    if (!messageToSign.startsWith(this.config.signInPrefix)) throw new Error("Cannot sign on invalid message");
    const signedMessage = this.signAuthMessage(address, messageToSign);
    const response = await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["post"])("".concat(this.config.api, "/auth/verify"), {
      public_address: address,
      signed_message: signedMessage
    }, {}, {
      useAPIKey: true
    });
    this.updateState({
      jwtToken: response.token
    }, address);
  }

  async init(address, userInfo, jwtToken) {
    let response = {
      token: jwtToken
    };
    if (this.getAddressState(address)) return;

    if (!jwtToken) {
      const messageToSign = await this.getMessageForSigning(address);
      if (!messageToSign.startsWith(this.config.signInPrefix)) throw new Error("Cannot sign on invalid message");
      const signedMessage = this.signAuthMessage(address, messageToSign);
      response = await Object(_toruslabs_http_helpers__WEBPACK_IMPORTED_MODULE_1__["post"])("".concat(this.config.api, "/auth/verify"), {
        public_address: address,
        signed_message: signedMessage
      }, {}, {
        useAPIKey: true
      });
    }

    this.updateState({
      jwtToken: response.token,
      userInfo
    }, address);
  }

  updateState(preferences, address) {
    const selectedAddress = address || this.state.selectedAddress;
    const currentState = this.getAddressState(selectedAddress) || Object(lodash__WEBPACK_IMPORTED_MODULE_3__["cloneDeep"])(this.defaultPreferences);

    const mergedState = _objectSpread(_objectSpread({}, currentState), preferences);

    this.update({
      identities: _objectSpread(_objectSpread({}, this.state.identities), {}, {
        [selectedAddress]: mergedState
      })
    });
    return mergedState;
  }

  headers(address) {
    var _this$getAddressState7;

    const selectedAddress = address || this.state.selectedAddress;
    return {
      headers: {
        Authorization: "Bearer ".concat(((_this$getAddressState7 = this.getAddressState(selectedAddress)) === null || _this$getAddressState7 === void 0 ? void 0 : _this$getAddressState7.jwtToken) || ""),
        "Content-Type": "application/json; charset=utf-8"
      }
    };
  }

}

/***/ }),
/* 34 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BaseTransactionStateManager; });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _BaseController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(3);
/* harmony import */ var _ITransactionController__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(4);


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }





class BaseTransactionStateManager extends _BaseController__WEBPACK_IMPORTED_MODULE_2__[/* default */ "a"] {
  constructor(_ref) {
    let {
      config,
      state,
      getCurrentChainId
    } = _ref;
    super({
      config,
      state
    });

    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this, "getCurrentChainId", void 0);

    this.defaultConfig = {
      txHistoryLimit: 40
    };
    this.defaultState = {
      transactions: {},
      unapprovedTxs: {},
      currentNetworkTxsList: []
    };
    this.initialize();
    this.getCurrentChainId = getCurrentChainId;
  }

  getUnapprovedTxList() {
    const chainId = this.getCurrentChainId();
    return Object(lodash__WEBPACK_IMPORTED_MODULE_1__["pickBy"])(this.state.transactions, transaction => transaction.status === _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].unapproved && Object(_utils__WEBPACK_IMPORTED_MODULE_3__[/* transactionMatchesNetwork */ "s"])(transaction, chainId));
  }

  getTransaction(txId) {
    const {
      transactions
    } = this.state;
    return transactions[txId];
  }

  updateTransaction(txMeta) {
    // commit txMeta to state
    const txId = txMeta.id;
    txMeta.updated_at = new Date().toISOString();
    this.update({
      transactions: _objectSpread(_objectSpread({}, this.state.transactions), {}, {
        [txId]: txMeta
      })
    });
  }

  setTxStatusRejected(txId) {
    this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].rejected);

    this._deleteTransaction(txId);
  }
  /**
   * The implementing controller can override this functionality and add custom logic + call super.()
   */


  setTxStatusUnapproved(txId) {
    this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].unapproved);
  }

  setTxStatusApproved(txId) {
    this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].approved);
  }

  setTxStatusSigned(txId) {
    this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].signed);
  }

  setTxStatusSubmitted(txId) {
    this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].submitted);
  }

  setTxStatusDropped(txId) {
    this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].dropped);
  }

  setTxStatusExpired(txId) {
    this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].expired);
  }

  setTxStatusConfirmed(txId) {
    this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].confirmed);
  }

  setTxStatusFailed(txId, error_) {
    const error = !error_ ? new Error("Internal torus failure") : error_;
    const txMeta = this.getTransaction(txId);
    txMeta.error = error;
    this.updateTransaction(txMeta);

    this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].failed);
  }
  /**
   * Method to determine if the transaction is in a final state
   * @param status - Transaction status
   * @returns boolean if the transaction is in a final state
   */


  isFinalState(status) {
    return status === _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].rejected || status === _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].submitted || status === _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].confirmed || status === _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].failed || status === _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].cancelled || status === _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].expired;
  }
  /**
   * Filters out the unapproved transactions from state
   */


  clearUnapprovedTxs() {
    this.update({
      transactions: Object(lodash__WEBPACK_IMPORTED_MODULE_1__["omitBy"])(this.state.transactions, transaction => transaction.status === _ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TransactionStatus */ "c"].unapproved)
    });
  }
  /**
   * will append new transactions to old txns.
   */


  _addTransactionsToState(transactions) {
    this.update({
      transactions: transactions.reduce((result, newTx) => {
        result[newTx.id] = newTx;
        return result;
      }, this.state.transactions)
    });
  }
  /**
   * will set new txns, override existing if any in state.
   */


  _setTransactionsToState(transactions) {
    this.update({
      transactions: transactions.reduce((result, newTx) => {
        result[newTx.id] = newTx;
        return result;
      }, {})
    });
  }

  _deleteTransaction(targetTransactionId) {
    const {
      transactions
    } = this.state;
    delete transactions[targetTransactionId];
    this.update({
      transactions
    });
  }

  _deleteTransactions(targetTransactionIds) {
    const {
      transactions
    } = this.state;
    targetTransactionIds.forEach(transactionId => {
      delete transactions[transactionId];
    });
    this.update({
      transactions
    });
  }

  _setTransactionStatus(txId, status) {
    const txMeta = this.getTransaction(txId);

    if (!txMeta) {
      return;
    }

    txMeta.status = status; // only updating status so no validation required on txn.

    this.updateTransaction(txMeta);
    this.emit(_ITransactionController__WEBPACK_IMPORTED_MODULE_4__[/* TX_EVENTS */ "b"].TX_STATUS_UPDATE, {
      txId,
      status
    });

    if (this.isFinalState(status)) {
      this.emit("".concat(txMeta.id, ":finished"), txMeta);
    } else {
      this.emit("".concat(txMeta.id, ":").concat(status), txId);
    }
  }

}

/***/ }),
/* 35 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, "a", function() { return /* reexport */ BroadcastChannelHandler_BroadcastChannelHandler; });
__webpack_require__.d(__webpack_exports__, "b", function() { return /* reexport */ Popup_PopupHandler; });
__webpack_require__.d(__webpack_exports__, "c", function() { return /* reexport */ PopupStoreChannel_PopupStoreChannel; });
__webpack_require__.d(__webpack_exports__, "d", function() { return /* reexport */ Popup_PopupWithBcHandler; });
__webpack_require__.d(__webpack_exports__, "e", function() { return /* reexport */ RedirectHandler_RedirectHandler; });
__webpack_require__.d(__webpack_exports__, "f", function() { return /* reexport */ Popup_StreamWindow; });

// EXTERNAL MODULE: external "@babel/runtime/helpers/defineProperty"
var defineProperty_ = __webpack_require__(0);
var defineProperty_default = /*#__PURE__*/__webpack_require__.n(defineProperty_);

// EXTERNAL MODULE: external "broadcast-channel"
var external_broadcast_channel_ = __webpack_require__(8);

// EXTERNAL MODULE: ./src/enums.ts
var enums = __webpack_require__(1);

// EXTERNAL MODULE: ./src/utils/index.ts + 1 modules
var utils = __webpack_require__(3);

// CONCATENATED MODULE: ./src/Popup/BroadcastChannelHandler.ts




class BroadcastChannelHandler_BroadcastChannelHandler {
  constructor(channelPrefix) {
    defineProperty_default()(this, "bc", void 0);

    defineProperty_default()(this, "channel", void 0);

    const queryParameters = new URLSearchParams(window.location.search);
    const instanceId = queryParameters.get("instanceId");
    this.channel = "".concat(channelPrefix, "_").concat(instanceId);
    this.bc = new external_broadcast_channel_["BroadcastChannel"](this.channel, utils["c" /* broadcastChannelOptions */]);
  }

  getMessageFromChannel() {
    return new Promise((resolve, reject) => {
      this.bc.addEventListener("message", async ev => {
        this.bc.close();

        if (ev.error) {
          reject(ev.error);
        } else {
          resolve(ev.data);
        }
      });
      this.bc.postMessage({
        data: {
          type: enums["v" /* POPUP_LOADED */]
        }
      });
    });
  }

}
// CONCATENATED MODULE: ./src/Popup/interfaces.ts

// EXTERNAL MODULE: ./src/BaseController.ts
var BaseController = __webpack_require__(6);

// EXTERNAL MODULE: external "loglevel"
var external_loglevel_ = __webpack_require__(2);
var external_loglevel_default = /*#__PURE__*/__webpack_require__.n(external_loglevel_);

// CONCATENATED MODULE: ./src/Popup/StreamWindow.ts







class StreamWindow_StreamWindow extends BaseController["a" /* default */] {
  // if window has been closed by users
  constructor(_ref) {
    let {
      config,
      state = {}
    } = _ref;
    super({
      config,
      state
    });

    defineProperty_default()(this, "closed", false);

    this.initialize();
  }

  async open() {
    return new Promise((resolve, reject) => {
      const {
        communicationEngine,
        communicationWindowManager
      } = this.config;
      communicationWindowManager.once("".concat(this.state.windowId, ":closed"), () => {
        this.closed = true;
      }); // Window is not open yet

      if (!this.state.windowId) {
        this.update({
          windowId: Object(utils["o" /* randomId */])()
        });
        communicationWindowManager.once("".concat(this.state.windowId, ":opened"), () => {
          resolve(this);
        }); // Tell the other party to create a window by prompting the user to click on something

        communicationEngine.emit("notification", {
          method: enums["q" /* COMMUNICATION_NOTIFICATIONS */].CREATE_WINDOW,
          params: {
            windowId: this.state.windowId,
            url: this.state.url.href
          }
        });
      } else {
        // Send this window with `windowId` the url to open via bc
        const bc = new external_broadcast_channel_["BroadcastChannel"](this.state.windowId, utils["c" /* broadcastChannelOptions */]);
        let writeInterval = null;
        bc.addEventListener("message", async ev => {
          try {
            external_loglevel_default.a.info(ev, "receiving data on channel: ".concat(bc.name));
            const {
              error
            } = ev;

            if (error) {
              // Popup says some error. so, we say it's not really opened
              reject(new Error(error));
              return;
            }

            const {
              message
            } = ev.data;

            if (message === enums["v" /* POPUP_LOADED */]) {
              if (writeInterval) window.clearInterval(writeInterval);
              await bc.postMessage({
                data: {
                  url: this.state.url.href,
                  message: "" // No need of a msg

                }
              });
              resolve(this);
              bc.close();
            }
          } catch (error) {
            reject(error);
            bc.close(); // Something went wrong. so, we close that window

            this.close();
          }
        }); // We don't know if the other end is ready to receive this msg. So, we keep writing until it receives and sends back something

        writeInterval = window.setInterval(() => {
          bc.postMessage({
            data: {
              message: enums["z" /* SETUP_COMPLETE */]
            }
          });
        }, 200);
      }
    });
  }

  close() {
    const {
      communicationEngine
    } = this.config;
    communicationEngine.emit("notification", {
      method: enums["q" /* COMMUNICATION_NOTIFICATIONS */].CLOSE_WINDOW,
      params: {
        windowId: this.state.windowId
      }
    });
  }

}

/* harmony default export */ var Popup_StreamWindow = (StreamWindow_StreamWindow);
// CONCATENATED MODULE: ./src/Popup/PopupHandler.ts




/*
Scenarios:
1. Open a normal popup window and no communication with it - Use PopupHandler
2. Open a popup window and communicate with it - Use PopupWithBcHandler (can initiate communication by waiting for window to open or not)

3. If window is already opened, pass in windowId to the popup handler. 
   This will establish communication with the popup window and sends it a new url to redirect to


If you're trying to open a window and it gets blocked (happens if you're in iframe or delay b/w click and opening window),
StreamWindow is invoked and it writes in a channel to display a message to the user

Once user clicks on that modal/dialog, we pre-open the window and pass in the windowId (goes to 3)
*/

/**
 * Handles popup window management.
 * For broadcast channel communication, use url with `instanceId` coded into state parameter.
 * This state parameter will be passed across redirects according to OAuth spec.
 */

class PopupHandler_PopupHandler extends BaseController["a" /* default */] {
  constructor(_ref) {
    let {
      config,
      state
    } = _ref;
    super({
      config,
      state
    }); // this.id = randomId()
    // Add in dapp storage key to all popups as a hash parameter

    this.defaultConfig = {
      dappStorageKey: "",
      features: Object(utils["i" /* getPopupFeatures */])(enums["s" /* FEATURES_DEFAULT_POPUP_WINDOW */]),
      target: "_blank",
      communicationEngine: null,
      communicationWindowManager: null
    };
    this.defaultState = {
      windowTimer: null,
      window: null,
      iClosedWindow: false,
      windowId: "",
      url: state.url
    };
    this.initialize();

    this._setupTimer();
  }

  async open() {
    // if window is already open
    const {
      target,
      features,
      dappStorageKey,
      communicationEngine,
      communicationWindowManager
    } = this.config;
    const {
      windowId,
      url
    } = this.state;

    if (dappStorageKey) {
      const urlHashParams = new URLSearchParams(url.hash.slice(1));
      urlHashParams.append("dappStorageKey", dappStorageKey);
      url.hash = urlHashParams.toString();
      this.update({
        url
      });
    } // No window has been pre-opened


    if (!windowId) {
      // try to open a window first
      let localWindow = window.open(url.href, target, features);

      if (!localWindow) {
        // if it's blocked, open StreamWindow
        localWindow = new Popup_StreamWindow({
          config: {
            communicationEngine,
            communicationWindowManager
          },
          state: {
            url
          }
        });
        localWindow.open();
      }

      this.update({
        window: localWindow
      });
      return;
    } // A window has been pre-opened with a query parameter `windowId`


    const localWindow = new Popup_StreamWindow({
      config: {
        communicationEngine,
        communicationWindowManager
      },
      state: {
        url,
        windowId
      }
    });
    this.update({
      window: localWindow
    });
    await localWindow.open();
  }

  close() {
    this.update({
      iClosedWindow: true
    });
    const {
      window
    } = this.state;
    if (window) window.close();
  }

  _setupTimer() {
    const timer = window.setInterval(() => {
      const {
        window,
        windowTimer,
        iClosedWindow
      } = this.state;

      if (window && window.closed) {
        if (windowTimer) clearInterval(windowTimer);

        if (!iClosedWindow) {
          this.emit("close");
        }

        this.update({
          iClosedWindow: false,
          window: null
        });
      }

      if (window === null && windowTimer) clearInterval(windowTimer);
    }, 500);
    this.update({
      windowTimer: timer
    });
  }

}

/* harmony default export */ var Popup_PopupHandler = (PopupHandler_PopupHandler);
// CONCATENATED MODULE: ./src/Popup/PopupStoreChannel.ts





class PopupStoreChannel_PopupStoreChannel {
  constructor(_ref) {
    let {
      instanceId,
      handleLogout,
      handleAccountImport,
      handleNetworkChange,
      handleSelectedAddressChange
    } = _ref;

    defineProperty_default()(this, "handleLogout", void 0);

    defineProperty_default()(this, "handleAccountImport", void 0);

    defineProperty_default()(this, "handleNetworkChange", void 0);

    defineProperty_default()(this, "handleSelectedAddressChange", void 0);

    defineProperty_default()(this, "instanceId", void 0);

    this.instanceId = instanceId;
    this.handleLogout = handleLogout;
    this.handleAccountImport = handleAccountImport;
    this.handleNetworkChange = handleNetworkChange;
    this.handleSelectedAddressChange = handleSelectedAddressChange;
  }

  setupStoreChannels() {
    this.logoutChannel();
    this.importAccountChannel();
    this.networkChangeChannel();
    this.selectedAddressChangeChannel();
  }

  logoutChannel() {
    const logoutChannel = new external_broadcast_channel_["BroadcastChannel"]("".concat(enums["n" /* BROADCAST_CHANNELS */].WALLET_LOGOUT_CHANNEL, "_").concat(this.instanceId), utils["c" /* broadcastChannelOptions */]);
    logoutChannel.addEventListener("message", ev => {
      var _ev$data;

      external_loglevel_default.a.info("received logout message", ev);

      if (!ev.error && ((_ev$data = ev.data) === null || _ev$data === void 0 ? void 0 : _ev$data.type) === enums["o" /* BROADCAST_CHANNELS_MSGS */].LOGOUT) {
        external_loglevel_default.a.info("Logging Out");
        this.handleLogout();
      }
    });
  }

  importAccountChannel() {
    const walletAccountImportChannel = new external_broadcast_channel_["BroadcastChannel"]("".concat(enums["n" /* BROADCAST_CHANNELS */].WALLET_ACCOUNT_IMPORT_CHANNEL, "_").concat(this.instanceId), utils["c" /* broadcastChannelOptions */]);
    walletAccountImportChannel.addEventListener("message", ev => {
      var _ev$data2;

      if (!ev.error && ((_ev$data2 = ev.data) === null || _ev$data2 === void 0 ? void 0 : _ev$data2.type) === enums["o" /* BROADCAST_CHANNELS_MSGS */].ACCOUNT_IMPORTED) {
        var _ev$data3;

        this.handleAccountImport((_ev$data3 = ev.data) === null || _ev$data3 === void 0 ? void 0 : _ev$data3.privKey);
      }
    });
  }

  networkChangeChannel() {
    const walletAccountImportChannel = new external_broadcast_channel_["BroadcastChannel"]("".concat(enums["n" /* BROADCAST_CHANNELS */].WALLET_NETWORK_CHANGE_CHANNEL, "_").concat(this.instanceId), utils["c" /* broadcastChannelOptions */]);
    walletAccountImportChannel.addEventListener("message", ev => {
      var _ev$data4;

      if (!ev.error && ((_ev$data4 = ev.data) === null || _ev$data4 === void 0 ? void 0 : _ev$data4.type) === enums["o" /* BROADCAST_CHANNELS_MSGS */].NETWORK_CHANGE) {
        var _ev$data5;

        this.handleNetworkChange((_ev$data5 = ev.data) === null || _ev$data5 === void 0 ? void 0 : _ev$data5.network);
      }
    });
  }

  selectedAddressChangeChannel() {
    const walletAccountImportChannel = new external_broadcast_channel_["BroadcastChannel"]("".concat(enums["n" /* BROADCAST_CHANNELS */].WALLET_SELECTED_ADDRESS_CHANNEL, "_").concat(this.instanceId), utils["c" /* broadcastChannelOptions */]);
    walletAccountImportChannel.addEventListener("message", ev => {
      var _ev$data6;

      if (!ev.error && ((_ev$data6 = ev.data) === null || _ev$data6 === void 0 ? void 0 : _ev$data6.type) === enums["o" /* BROADCAST_CHANNELS_MSGS */].SELECTED_ADDRESS_CHANGE) {
        var _ev$data7;

        this.handleSelectedAddressChange((_ev$data7 = ev.data) === null || _ev$data7 === void 0 ? void 0 : _ev$data7.selectedAddress);
      }
    });
  }

}
// CONCATENATED MODULE: ./src/Popup/PopupWithBcHandler.ts






/**
 * PopupWithBcHandler is a PopupHandler which uses broadcast channel to communicate with the popup window.
 */

class PopupWithBcHandler_PopupWithBcHandler extends Popup_PopupHandler {
  constructor(_ref) {
    let {
      config,
      state,
      instanceId
    } = _ref;
    super({
      config,
      state
    });

    defineProperty_default()(this, "bc", void 0);

    this.bc = new external_broadcast_channel_["BroadcastChannel"](instanceId, utils["c" /* broadcastChannelOptions */]);
  }
  /**
   * Receives the data from popup window and closes the window
   * @param successExtraFn - Extra function to be called after the data is received
   * @returns The data to be received
   */


  handle(successExtraFn) {
    return new Promise((resolve, reject) => {
      const closeListener = () => {
        this.bc.close();
        reject(new utils["a" /* UserError */]("user closed popup"));
        this.removeListener("close", closeListener);
      };

      this.on("close", closeListener);
      this.bc.addEventListener("message", async ev => {
        external_loglevel_default.a.info(ev, "receiving data on channel: ".concat(this.bc.name));

        try {
          const {
            error,
            data
          } = ev;

          if (error) {
            reject(new Error(error));
            return;
          }

          if (successExtraFn) await successExtraFn.call(this, data);
          resolve(data);
        } catch (error) {
          reject(error);
        } finally {
          this.bc.close();
          this.close();
        }
      });
      this.open().then(() => {
        external_loglevel_default.a.info("opened window ".concat(this.bc.name)); // Opened window. yay.  let the bc events do their job

        return undefined;
      }).catch(err => {
        external_loglevel_default.a.error(err, "something went wrong while opening window");
        reject(err);
      });
    });
  }
  /**
   * Use this if we have to send large payloads which don't fit in query/hash params.
   * Waits for ack that popup window is ready to receive data.
   * Receives the data from popup window and closes the window
   * @param payload - The data to be sent to the popup window once we have ack that window is ready to receive data
   * @param successExtraFn - Extra function to be called after the data is received
   * @returns The data to be received
   */


  handleWithHandshake(payload, successExtraFn) {
    return new Promise((resolve, reject) => {
      const closeListener = () => {
        this.bc.close();
        reject(new utils["a" /* UserError */]("user closed popup"));
        this.removeListener("close", closeListener);
      };

      this.on("close", closeListener);
      this.bc.addEventListener("message", async ev => {
        try {
          external_loglevel_default.a.info(ev, "receiving data on channel: ".concat(this.bc.name));
          const {
            error,
            data
          } = ev;

          if (error) {
            reject(new Error(error));
            return;
          } // Do handshake


          const {
            type = ""
          } = data;

          if (type === enums["v" /* POPUP_LOADED */]) {
            // Hack with generic to use the same type for both send and receive
            await this.bc.postMessage({
              data: payload
            });
          } else if (type === enums["w" /* POPUP_RESULT */]) {
            if (successExtraFn) await successExtraFn.call(this, data);
            resolve(data); // Must only close the bc after result is done

            this.bc.close();
            this.close();
          }
        } catch (error) {
          reject(error);
          this.bc.close();
          this.close();
        }
      });
      this.open().then(() => {
        external_loglevel_default.a.info("opened window ".concat(this.bc.name)); // Opened window. yay.  let the bc events do their job

        return undefined;
      }).catch(err => {
        external_loglevel_default.a.error(err, "something went wrong while opening window");
        reject(err);
      });
    });
  }

}

/* harmony default export */ var Popup_PopupWithBcHandler = (PopupWithBcHandler_PopupWithBcHandler);
// EXTERNAL MODULE: ./src/utils/utils.ts
var utils_utils = __webpack_require__(11);

// CONCATENATED MODULE: ./src/Popup/RedirectHandler.ts





class RedirectHandler_RedirectHandler {
  constructor() {
    defineProperty_default()(this, "error", void 0);

    defineProperty_default()(this, "finalQueryParams", {});

    defineProperty_default()(this, "instanceParameters", void 0);

    defineProperty_default()(this, "hashParameters", void 0);

    const {
      hash
    } = window.location;
    const queryParameters = new URLSearchParams(window.location.search);
    queryParameters.forEach((value, key) => {
      this.finalQueryParams[key] = value;
    });
    const {
      error,
      instanceParameters,
      hashParameters
    } = Object(utils_utils["j" /* handleRedirectParameters */])(hash, this.finalQueryParams);
    this.error = error;
    this.instanceParameters = instanceParameters;
    this.hashParameters = hashParameters;
  }

  async handle() {
    return new Promise((resolve, reject) => {
      const {
        finalQueryParams,
        instanceParameters,
        hashParameters,
        error
      } = this;
      let bc;

      try {
        if (!finalQueryParams.windowId) {
          bc = new external_broadcast_channel_["BroadcastChannel"]("".concat(enums["n" /* BROADCAST_CHANNELS */].REDIRECT_CHANNEL, "_").concat(instanceParameters.instanceId), utils_utils["c" /* broadcastChannelOptions */]);
          bc.addEventListener("message", async ev => {
            if (ev.error) {
              reject(ev.error);
              window.close();
            } else {
              resolve();
              bc.close();
              external_loglevel_default.a.info("posted", {
                finalQueryParams,
                hashParameters,
                instanceParameters
              });
            }
          });
          bc.postMessage({
            data: {
              instanceParams: instanceParameters,
              hashParams: hashParameters,
              queryParams: finalQueryParams
            },
            error
          });
          setTimeout(() => {
            resolve();
            window.location.href = window.location.origin + window.location.search + window.location.hash;
          }, 5000);
        } else {
          bc = new external_broadcast_channel_["BroadcastChannel"]("".concat(finalQueryParams.windowId), utils_utils["c" /* broadcastChannelOptions */]);
          bc.addEventListener("message", async ev => {
            const {
              url,
              message
            } = ev.data;

            if (url) {
              resolve();
              window.location.href = url;
            } else if (message === enums["z" /* SETUP_COMPLETE */]) {
              await bc.postMessage({
                data: {
                  windowId: finalQueryParams.windowId,
                  message: enums["v" /* POPUP_LOADED */]
                }
              });
            }

            if (ev.error && ev.error !== "") {
              external_loglevel_default.a.error(ev.error);
              resolve();
              bc.close();
            }
          });
        }
      } catch (err) {
        external_loglevel_default.a.info(err, "something went wrong");
        reject(err);
        if (bc) bc.close();
        window.close();
      }
    });
  }

}
// CONCATENATED MODULE: ./src/Popup/index.ts








/***/ }),
/* 36 */
/***/ (function(module, exports) {

module.exports = require("json-rpc-random-id");

/***/ }),
/* 37 */
/***/ (function(module, exports) {

module.exports = require("bowser");

/***/ }),
/* 38 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _Account_IAccountTrackerController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(19);
/* harmony import */ var _BaseController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BaseController", function() { return _BaseController__WEBPACK_IMPORTED_MODULE_1__["a"]; });

/* harmony import */ var _Block_BaseBlockTracker__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(20);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BaseBlockTracker", function() { return _Block_BaseBlockTracker__WEBPACK_IMPORTED_MODULE_2__["a"]; });

/* harmony import */ var _Block_IBlockTrackerController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21);
/* harmony import */ var _createEventEmitterProxy__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(22);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createEventEmitterProxy", function() { return _createEventEmitterProxy__WEBPACK_IMPORTED_MODULE_4__["a"]; });

/* harmony import */ var _createSwappableProxy__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(14);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createSwappableProxy", function() { return _createSwappableProxy__WEBPACK_IMPORTED_MODULE_5__["a"]; });

/* harmony import */ var _Currency_BaseCurrencyController__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(23);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BaseCurrencyController", function() { return _Currency_BaseCurrencyController__WEBPACK_IMPORTED_MODULE_6__["a"]; });

/* harmony import */ var _Currency_ICurrencyController__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(24);
/* harmony import */ var _Embed_BaseEmbedController__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(25);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BaseEmbedController", function() { return _Embed_BaseEmbedController__WEBPACK_IMPORTED_MODULE_8__["a"]; });

/* harmony import */ var _Embed_CommunicationMethodMiddleware__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(16);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createChangeProviderMiddlewareMiddleware", function() { return _Embed_CommunicationMethodMiddleware__WEBPACK_IMPORTED_MODULE_9__["a"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createTopupMiddleware", function() { return _Embed_CommunicationMethodMiddleware__WEBPACK_IMPORTED_MODULE_9__["d"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createGenericJRPCMiddleware", function() { return _Embed_CommunicationMethodMiddleware__WEBPACK_IMPORTED_MODULE_9__["c"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createCommunicationMiddleware", function() { return _Embed_CommunicationMethodMiddleware__WEBPACK_IMPORTED_MODULE_9__["b"]; });

/* harmony import */ var _Embed_CommunicationWindowManager__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(26);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CommunicationWindowManager", function() { return _Embed_CommunicationWindowManager__WEBPACK_IMPORTED_MODULE_10__["a"]; });

/* harmony import */ var _Embed_IEmbedController__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(27);
/* harmony import */ var _Embed_IEmbedController__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_Embed_IEmbedController__WEBPACK_IMPORTED_MODULE_11__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _Embed_IEmbedController__WEBPACK_IMPORTED_MODULE_11__) if(["default","BaseController","createEventEmitterProxy","createSwappableProxy","CommunicationWindowManager","BaseBlockTracker","BaseCurrencyController","BaseEmbedController","createChangeProviderMiddlewareMiddleware","createTopupMiddleware","createGenericJRPCMiddleware","createCommunicationMiddleware"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _Embed_IEmbedController__WEBPACK_IMPORTED_MODULE_11__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FEATURES_PROVIDER_CHANGE_WINDOW", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["u"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FEATURES_DEFAULT_WALLET_WINDOW", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["t"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FEATURES_DEFAULT_POPUP_WINDOW", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["s"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FEATURES_CONFIRM_WINDOW", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["r"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "POPUP_LOADED", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["v"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "POPUP_RESULT", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["w"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SETUP_COMPLETE", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["z"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ACTIVITY_ACTION_ALL", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["a"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ACTIVITY_ACTION_SEND", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["c"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ACTIVITY_ACTION_RECEIVE", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["b"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ACTIVITY_ACTION_TOPUP", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["d"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ACTIVITY_PERIOD_ALL", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["e"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ACTIVITY_PERIOD_WEEK_ONE", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["h"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ACTIVITY_PERIOD_MONTH_ONE", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["f"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ACTIVITY_PERIOD_MONTH_SIX", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["g"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ACTIVITY_STATUS_SUCCESSFUL", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["l"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ACTIVITY_STATUS_UNSUCCESSFUL", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["m"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ACTIVITY_STATUS_PENDING", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["k"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ACTIVITY_STATUS_CANCELLED", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["i"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ACTIVITY_STATUS_CANCELLING", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["j"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "COMMUNICATION_NOTIFICATIONS", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["q"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "COMMUNICATION_JRPC_METHODS", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["p"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PROVIDER_JRPC_METHODS", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["x"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PROVIDER_NOTIFICATIONS", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["y"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BROADCAST_CHANNELS", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["n"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BROADCAST_CHANNELS_MSGS", function() { return _enums__WEBPACK_IMPORTED_MODULE_12__["o"]; });

/* harmony import */ var _interfaces__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(17);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LOGIN_PROVIDER", function() { return _interfaces__WEBPACK_IMPORTED_MODULE_13__["a"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PAYMENT_PROVIDER", function() { return _interfaces__WEBPACK_IMPORTED_MODULE_13__["b"]; });

/* harmony import */ var _Keyring_BaseKeyringController__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(28);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BaseKeyringController", function() { return _Keyring_BaseKeyringController__WEBPACK_IMPORTED_MODULE_14__["a"]; });

/* harmony import */ var _Keyring_IKeyringController__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(29);
/* harmony import */ var _Network_createFetchMiddleware__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(30);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createFetchConfigFromReq", function() { return _Network_createFetchMiddleware__WEBPACK_IMPORTED_MODULE_16__["a"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createFetchMiddleware", function() { return _Network_createFetchMiddleware__WEBPACK_IMPORTED_MODULE_16__["b"]; });

/* harmony import */ var _Network_createLoggerMiddleware__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(31);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createLoggerMiddleware", function() { return _Network_createLoggerMiddleware__WEBPACK_IMPORTED_MODULE_17__["a"]; });

/* harmony import */ var _Network_createOriginMiddleware__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(32);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createOriginMiddleware", function() { return _Network_createOriginMiddleware__WEBPACK_IMPORTED_MODULE_18__["a"]; });

/* harmony import */ var _Network_INetworkController__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(15);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createRandomId", function() { return _Network_INetworkController__WEBPACK_IMPORTED_MODULE_19__["a"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "providerFromEngine", function() { return _Network_INetworkController__WEBPACK_IMPORTED_MODULE_19__["c"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "providerFromMiddleware", function() { return _Network_INetworkController__WEBPACK_IMPORTED_MODULE_19__["d"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "providerAsMiddleware", function() { return _Network_INetworkController__WEBPACK_IMPORTED_MODULE_19__["b"]; });

/* harmony import */ var _Popup_index__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(35);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BroadcastChannelHandler", function() { return _Popup_index__WEBPACK_IMPORTED_MODULE_20__["a"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PopupHandler", function() { return _Popup_index__WEBPACK_IMPORTED_MODULE_20__["b"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PopupStoreChannel", function() { return _Popup_index__WEBPACK_IMPORTED_MODULE_20__["c"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PopupWithBcHandler", function() { return _Popup_index__WEBPACK_IMPORTED_MODULE_20__["d"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RedirectHandler", function() { return _Popup_index__WEBPACK_IMPORTED_MODULE_20__["e"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "StreamWindow", function() { return _Popup_index__WEBPACK_IMPORTED_MODULE_20__["f"]; });

/* harmony import */ var _Preferences_BasePreferencesController__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(33);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DEFAULT_PREFERENCES", function() { return _Preferences_BasePreferencesController__WEBPACK_IMPORTED_MODULE_21__["b"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BasePreferencesController", function() { return _Preferences_BasePreferencesController__WEBPACK_IMPORTED_MODULE_21__["a"]; });

/* harmony import */ var _Preferences_IPreferencesController__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(18);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ACTIVITY_ACTION", function() { return _Preferences_IPreferencesController__WEBPACK_IMPORTED_MODULE_22__["b"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ACCOUNT_CATEGORY", function() { return _Preferences_IPreferencesController__WEBPACK_IMPORTED_MODULE_22__["a"]; });

/* harmony import */ var _Transaction_BaseTransactionStateController__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(34);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BaseTransactionStateManager", function() { return _Transaction_BaseTransactionStateController__WEBPACK_IMPORTED_MODULE_23__["a"]; });

/* harmony import */ var _Transaction_ITransactionController__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(4);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TransactionStatus", function() { return _Transaction_ITransactionController__WEBPACK_IMPORTED_MODULE_24__["c"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TRANSACTION_TYPES", function() { return _Transaction_ITransactionController__WEBPACK_IMPORTED_MODULE_24__["a"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TX_EVENTS", function() { return _Transaction_ITransactionController__WEBPACK_IMPORTED_MODULE_24__["b"]; });

/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(3);
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getTxStatusText", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["j"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "intToHex", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["m"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "randomId", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["o"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "padWithZeroes", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["n"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "concatSig", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["d"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "timeout", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["r"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "formatSmallNumbers", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["f"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "addressSlicer", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["b"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "significantDigits", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["q"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "formatDate", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["e"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "formatTime", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["g"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "transactionMatchesNetwork", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["s"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hashMessage", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["l"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "signMessage", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["p"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getPopupFeatures", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["i"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "broadcastChannelOptions", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["c"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getCustomDeviceInfo", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["h"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "UserError", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["a"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "handleRedirectParameters", function() { return _utils__WEBPACK_IMPORTED_MODULE_25__["k"]; });




























/***/ })
/******/ ]);
//# sourceMappingURL=baseControllers.cjs.js.map